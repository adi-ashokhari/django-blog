<div class="card border-dark mb-3" style="max-width: 90rem;">
  <div class="row">
    <div class="col-sm-6">
      <div class="card" style="height: 12rem;">
        <div class="card-body">
          <h5 class='card-title'>{{ user_obj.user.title }}</h5>
          <p class='card-text'>
            <small class='text-muted'>{{ user_obj.user.publish_date }}</small>
            {% if truncate %}
            {{ user_obj.user.content|linebreaks|truncatewords:30 }}
            {% else %}
            {{ user_obj.user.content|linebreaks }}
            {% endif %}
          </p>

          {% if not detail %}
          {% if not user_obj.user.publish_date %} Draft {% endif %}
          <!-- <a href="{{ blog_post.get_absolute_url }}">View</a> -->
          <button type="button" class="btn btn-primary" data-toggle="modal"
            data-target="#userModal-{{ forloop.counter }}">
            View User Details
          </button>

          {% endif %}
        </div>
      </div>
    </div>
    <div class="col-sm-2">
      <div class="card" style="height: 12rem;">
        <div class="card-body">
          {% if user_obj.user.image %}
          <a href="{{ user_obj.user.get_absolute_url }}">
            <img src="{{ user_obj.user.image.url }}" class="card-img-right" class="img-responsive" width="100%"
              height="170px" />
          </a>
          {% endif %}
        </div>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal fade" id="userModal-{{ forloop.counter }}" tabindex="-1" role="dialog"
    aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">

        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">{{ user_obj.user.title }}</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>

        <div class="modal-body">
          <div class="container-fluid">

            <div class="row">
              <div class="col-md-8">
                <p><b>Username:</b> {{user_obj.user.user.username}}</p>
                <p><b>Id (Aadhar):</b> {{user_obj.user.id}}</p>
                <p class='card-text'>
                  <b>Joined Date:</b>
                  <span class="glyphicon glyphicon-time"></span>
                  <small class='text-muted'>{{ user_obj.user.publish_date }}</small>
                </p>
                <p>
                  <b>Description:</b>
                  {% if truncate %}
                  {{ user_obj.user.content|linebreaks|truncatewords:30 }}
                  {% else %}
                  {{ user_obj.user.content|linebreaks }}
                  {% endif %}
                </p>
                <p>
                  <b>Verified:</b> 
                  {% if user_obj.verified %}
                    <i class="fa fa-check-circle-o fa-lg" style="color:green;" aria-hidden="true"></i>
                  {% else %}
                    <i class="fa fa-times-circle-o fa-lg" style="color:red;" aria-hidden="true"></i>
                  {% endif %}
                </p>
              </div>
              <div class="col-md-4">
                <div class="card-body">
                  {% if user_obj.user.image %}
                  <a href="{{ user_obj.user.get_absolute_url }}">
                    <img src="{{ user_obj.user.image.url }}" class="card-img-right" class="img-responsive" width="100%"
                      height="170px" />
                  </a>
                  {% endif %}
                </div>
              </div>
            </div>

            <div class="row">
              <table class="table">
                <thead>
                  <tr>
                    <th scope="col">Year</th>
                    <th scope="col">Amount</th>
                    <th scope="col">Status</th>
                    <th scope="col">Factory</th>
                  </tr>
                </thead>
                <tbody>
                  {% if user_obj.payments %}
                    {% for payment in user_obj.payments %}
                      <tr>
                        <td>{{ payment.year }}</td>
                        <td>{{ payment.amount }}</td>
                        <td>{{ payment.status }}</td>
                        <td>{{ payment.factory }}</td>
                      </tr>
                    {% endfor %}
                  {% else %}
                    <tr>
                      <td></td>
                      <td><b>No Records Found!</b></td>
                      <td></td>
                    </tr>
                  {% endif %}
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>

      </div>
    </div>
  </div>

</div>